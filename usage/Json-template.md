Images can be generated by the esp32 by pushing or pulling a json template. In the template, you can draw whatever you like.

Pull: set the URL using the 'json template' content card.

Push: do a http POST to `/jsonupload`, with parameters `mac` and `json`. A demo/test-form is placed on `/jsontemplate-demo.html`

Example json file:
```
[
    {"text": [5,5,"Bahnschrift 20","fonts/bahnschrift20",1]},
    {"box": [10,30,20,20,1]},
    {"box": [35,30,20,20,2]},
    {"triangle": [60,30,60,50,80,40,1]},
    {"text": [5,80,"Plain text glasstown_nbp_tf","glasstown_nbp_tf",1]},
    {"text": [5,95,"Plain text 7x14_tf","7x14_tf",2]},
    {"text": [5,110,"Plain text t0_14b_tf","t0_14b_tf",1]},
    {"text": [135,5,"30","fonts/bahnschrift30",2]},
    {"text": [215,5,"70","fonts/bahnschrift70",1]},
    {"text": [150,80,"50","fonts/calibrib50",2,0]},
    {"text": [205,60,"80","fonts/calibrib80",2]},
    {"text": [90,35,"calibrib30","fonts/calibrib30",1]},
    {"line": [10,120,290,120,1]},
    {"line": [10,115,290,115,2]}
]
```

Result:

![Json template](usage/jsontemplate.jpg)

Parameters:

* `{ "text": [x, y, "text", "fontname", color] }`
* `{ "text": [x, y, "text", "fontname", color, alignment] }`
* `{ "box": [x, y, width, height, color] }`
* `{ "line": [x1, y1, x2, y2, color] }`
* `{ "triangle": [x1, y1, x2, y2, x3, y3, color] }`

`color`: 0: white, 1: black, 2: red

optional, `alignment`: 0: left, 1: center, 2: right

Then entering coordinates, take note of the following: The small bitmap fonts have their origin at the left bottom corner. The vlw bitmap fonts have their origin at the top left. And the origin of the truetype fonts is as much as possible at the baseline, but that can differ depending on the font. So, it's a bit trial and error.

`fontname`: one of the following fonts:

### Small (plain text) fonts: 

`glasstown_nbp_tf` 
![](usage/u8g2_font_glasstown_nbp_tf.png)

`7x14_tf` 
![](usage/u8g2_font_7x14_tf.png)

`t0_14b_tf`
![](usage/u8g2_font_t0_14b_tf.png)

If you want to add extra plain text fonts, it's needed to add them in `contentmanager.cpp`. Because flash size is very limited, try to avoid.
Plain text fonts by https://github.com/olikraus/u8g2

### Big fonts to be used for headings and big numbers:

any fonts in the /fonts folder:
* `fonts/bahnschrift20` upper case, lower case, numbers, and `äöüßÄÖÜåÅ!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~°`
* `fonts/bahnschrift30` upper case, lower case, numbers, and `äöüßÄÖÜåÅ!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~°`
* `fonts/bahnschrift70` only `0123456789.`
* `fonts/calibrib30` upper case, lower case, numbers, and `äöüßÄÖÜåÅ!\"#$%&'()*+,-./:;<=>?@[\\]^_{|}~°`
* `fonts/calibrib50` for displaying dates: only `ADFJMNOSTWabcdefghijklmnoprstuvwyzä0123456789`
* `fonts/calibrib60` for displaying dates: only `ADFJMNOSTWabcdefghijklmnoprstuvwyzä0123456789`
* `fonts/calibrib80` only `0123456789.°`
* `fonts/calibrib100` only `0123456789.°`
* `fonts/calibrib120` only `0123456789.°`
* `fonts/calibrib150` only `0123456789.°`
* `fonts/twcondensed20` Only `SUMOTWEHFRAZDIV0123456789`. Use for weekday names and numbers. 

If you want to add extra fonts to this list, you can convert them from Truetype by using Processing (https://processing.org/) and this script https://github.com/Bodmer/TFT_eSPI/tree/master/Tools/Create_Smooth_Font/Create_font . Place the .vlw font file in the /fonts folder. No need to update/rebuild the firmware.

### Truetype fonts:

`{ "text": [x, y, "text", "fontname", color, alignment, size] }`

Put the truetype font in the /fonts folder. Make sure you select your truetype font file carefully: some are very big, and that will not fit in the file system.

example:
`{ "text": [0, 10, "Use any font in any size!", "/fonts/Inkfree.ttf", 1, 0, 40] }`
